import{_ as x,n as z,p as h,x as U,y as Y,r,o as B,i as $,b as H,d as l,w as o,e as w,q as K,F as R,j as N,a as O,E as q,m as D,h as E,s as M,v as S}from"./index-40bdfac9.js";const P=z({setup(){const{proxy:e}=S(),n=h([{prop:"name",label:"姓名"},{prop:"age",label:"年龄"},{prop:"gender",label:"性别"},{prop:"birth",label:"出生日期",width:200},{prop:"addr",label:"地址",width:320}]);let C=U([]);const u=h({total:0,page:1,name:""}),F=t=>{u.page=t,p(u)},p=async t=>{let i=await e.$api.getUserData(t);C.value=i.list.map(c=>(c.gender=c.sex===0?"女":"男",c)),t.total=i.count},m=h({keyword:""}),f=()=>{u.name=m.keyword,p(u)},s=U(!1),b=t=>{if(Object.values(d).every(c=>c===""))return t(e.$refs.userFormRef.resetFields());q.confirm("关闭窗口将不会保存所编辑信息，确认关闭吗?","提示",{type:"warning",icon:D(E),cancelButtonText:"取消",confirmButtonText:"确定",confirmButtonClass:"el-messageBox-confirm",cancelButtonClass:"el-messageBox-cancel"}).then(()=>{t(),e.$refs.userFormRef.resetFields()}).catch(()=>{})},d=h({name:"",age:"",sex:"",birth:"",addr:""}),v=()=>{e.$refs.userFormRef.validate(async t=>{t?_.value==="add"?await e.$api.addUser(d)&&(e.$refs.userFormRef.resetFields(),s.value=!1,p(u)):(d.sex=d.sex==="男"?0:1,await e.$api.editUser(d)&&(e.$refs.userFormRef.resetFields(),s.value=!1,p(u))):M({showClose:!0,message:"请输入正确的内容",type:"error"})})},y=()=>{if(!Object.values(d).every(i=>i===""))for(let i in d)d[i]=""},_=U("add"),V=t=>{_.value="edit",s.value=!0,t.sex=t.sex===1?"男":"女",e.$nextTick(()=>{Object.assign(d,t)})},k=()=>{_.value="add",s.value=!0},g=t=>{q.confirm("确认永久删除该用户吗","提示",{type:"warning",icon:D(E),cancelButtonText:"取消",confirmButtonText:"确定",confirmButtonClass:"el-messageBox-confirm",cancelButtonClass:"el-messageBox-cancel"}).then(async()=>{await e.$api.deleteUser({id:t.id}),M({showClose:!0,message:"删除成功！",type:"success"}),p(u)}).catch(()=>{})};return Y(()=>{p(u)}),{userData:C,tableHead:n,paramConfig:u,changePage:F,formInline:m,searchHandler:f,dialogVisible:s,dialogClose:b,formUser:d,onSubmit:v,resetHandler:y,editHandler:V,addHandler:k,occupy:_,deleteHandler:g}}}),L={class:"action-contaienr"},A={class:"table-container"};function G(e,n,C,u,F,p){const m=r("el-button"),f=r("el-input"),s=r("el-form-item"),b=r("el-form"),d=r("el-table-column"),v=r("Edit"),y=r("el-icon"),_=r("Delete"),V=r("el-table"),k=r("el-pagination"),g=r("el-col"),t=r("el-row"),i=r("el-option"),c=r("el-select"),T=r("el-date-picker"),j=r("el-dialog");return B(),$(R,null,[H("div",L,[l(m,{type:"primary",onClick:e.addHandler,color:"#2cb2c2"},{default:o(()=>[w("+ 新增")]),_:1},8,["onClick"]),l(b,{inline:!0,model:e.formInline},{default:o(()=>[l(s,null,{default:o(()=>[l(f,{modelValue:e.formInline.keyword,"onUpdate:modelValue":n[0]||(n[0]=a=>e.formInline.keyword=a),placeholder:"请输入用户名",onKeyup:K(e.searchHandler,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),l(s,null,{default:o(()=>[l(m,{type:"primary",onClick:e.searchHandler,color:"#2cb2c2"},{default:o(()=>[w("搜索")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),H("div",A,[l(V,{data:e.userData,style:{width:"100%"},height:"75vh",align:"center",stripe:"","header-row-style":{color:"#2cb2c2",fontSize:16+"px"}},{default:o(()=>[(B(!0),$(R,null,N(e.tableHead,a=>(B(),O(d,{key:a.prop,label:a.label,prop:a.prop,width:a.width?a.width:125,align:"center"},null,8,["label","prop","width"]))),128)),l(d,{fixed:"right",label:"操作","min-width":"180"},{default:o(a=>[l(m,{size:"small",onClick:I=>e.editHandler(a.row),title:"编辑用户信息"},{default:o(()=>[l(y,null,{default:o(()=>[l(v)]),_:1})]),_:2},1032,["onClick"]),l(m,{type:"danger",size:"small",onClick:I=>e.deleteHandler(a.row),title:"删除用户"},{default:o(()=>[l(y,null,{default:o(()=>[l(_)]),_:1})]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(k,{small:"",background:"",layout:"prev, pager, next",total:e.paramConfig.total,class:"mt-4",onCurrentChange:e.changePage},null,8,["total","onCurrentChange"])]),l(j,{modelValue:e.dialogVisible,"onUpdate:modelValue":n[6]||(n[6]=a=>e.dialogVisible=a),title:e.occupy==="add"?"新增用户":"编辑用户",width:"35%","before-close":e.dialogClose},{default:o(()=>[l(b,{inline:!0,model:e.formUser,ref:"userFormRef","label-width":"80px"},{default:o(()=>[l(t,null,{default:o(()=>[l(g,{span:12},{default:o(()=>[l(s,{label:"姓名",prop:"name",rules:[{required:!0,message:"请输入姓名"}]},{default:o(()=>[l(f,{modelValue:e.formUser.name,"onUpdate:modelValue":n[1]||(n[1]=a=>e.formUser.name=a),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1})]),_:1}),l(g,{span:12},{default:o(()=>[l(s,{label:"年龄",prop:"age",rules:[{required:!0,message:"请输入年龄"},{type:"number",message:"请输入数字"}]},{default:o(()=>[l(f,{modelValue:e.formUser.age,"onUpdate:modelValue":n[2]||(n[2]=a=>e.formUser.age=a),modelModifiers:{number:!0},placeholder:"请输入年龄"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(t,null,{default:o(()=>[l(g,{span:12},{default:o(()=>[l(s,{label:"性别",prop:"sex",rules:[{required:!0,message:"请选择性别"}]},{default:o(()=>[l(c,{modelValue:e.formUser.sex,"onUpdate:modelValue":n[3]||(n[3]=a=>e.formUser.sex=a),placeholder:"请选择"},{default:o(()=>[l(i,{label:"女",value:"1"}),l(i,{label:"男",value:"0"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(g,{span:12},{default:o(()=>[l(s,{label:"出生日期",prop:"birth",rules:[{required:!0,message:"请选择出生日期"}]},{default:o(()=>[l(T,{modelValue:e.formUser.birth,"onUpdate:modelValue":n[4]||(n[4]=a=>e.formUser.birth=a),type:"date",label:"出生日期",placeholder:"请选择",style:{width:"100%"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(s,{label:"地址",prop:"addr",rules:[{required:!0,message:"请输入地址"}],style:{width:"60%"}},{default:o(()=>[l(f,{modelValue:e.formUser.addr,"onUpdate:modelValue":n[5]||(n[5]=a=>e.formUser.addr=a),type:"textarea",placeholder:"请输入地址",resize:"none",rows:"3"},null,8,["modelValue"])]),_:1}),l(t,{style:{"justify-content":"flex-end"},class:"buttons-container"},{default:o(()=>[l(s,null,{default:o(()=>[l(m,{type:"primary",color:"#2cb2c2",onClick:e.resetHandler},{default:o(()=>[w("重置")]),_:1},8,["onClick"]),l(m,{type:"primary",color:"#2cb2c2",onClick:e.onSubmit},{default:o(()=>[w("确定")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title","before-close"])],64)}const Q=x(P,[["render",G]]);export{Q as default};
